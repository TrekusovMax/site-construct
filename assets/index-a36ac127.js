import{r as _,k as y,u as S,a as k,l as N,j as r,B as E,Q as g}from"./index-d09d88d5.js";import{I as l}from"./input-db76c353.js";import{a as u}from"./errorCodes-6eb2ab82.js";const O="password_change_GObj",R="password_change__form_oEjb",A="password_change__title_cTUR",C="password_change__input_container_da-R",D="password_change__submit_btn_10r5",o={password_change:O,password_change__form:R,password_change__title:A,password_change__input_container:C,password_change__submit_btn:D},T=s=>{const e={password:{message:""},confirmPassword:{message:""}};s.password.length<6&&(e.password.message=u.WEAK_PASSWORD),s.confirmPassword.length<6&&(e.confirmPassword.message=u.WEAK_PASSWORD),s.password===""&&(e.password.message="Поле не должно быть пустым"),s.confirmPassword===""&&(e.confirmPassword.message="Поле не должно быть пустым"),s.password!==s.confirmPassword&&(e.confirmPassword.message="Пароли не совпадают");for(const n of Object.keys(e))if(e[n].message!=="")return e;return{}},U=()=>{const[s,e]=_.useState({}),[n,h]=_.useState(!0),[c,f]=_.useState({password:"",confirmPassword:""}),[P]=y(),b=S(),j=k(N),{accessToken:x}=j,v=async a=>{var d,w;a.preventDefault();const i=c.password,t=await P({password:i,idToken:x,returnSecureToken:!0});if("error"in t){const m=t.error;g.error(`Ошибка! code: ${(d=m.data)==null?void 0:d.error.code}, message: ${(w=m.data)==null?void 0:w.error.message}`)}else g.success("Пароль успешно изменён"),b("/")},p=a=>{const i={...c,[a.target.name]:a.target.value},t=T(i);e(t),h(Object.keys(t).length!==0),f(d=>({...d,[a.target.name]:a.target.value}))};return r.jsx("div",{className:o.password_change,children:r.jsxs("form",{onSubmit:v,className:o.password_change__form,children:[r.jsx("h1",{className:o.password_change__title,children:"Смена пароля"}),r.jsx("div",{className:o.password_change__input_container,children:r.jsx(l,{error:s.password&&s.password.message,type:"password",id:"form_password",name:"password",onChange:a=>p(a),value:c.password,placeholder:"Новый пароль",style:{color:"black",width:"100%"}})}),r.jsx("div",{className:o.password_change__input_container,children:r.jsx(l,{error:s.confirmPassword&&s.confirmPassword.message,type:"password",id:"form_confirm_password",name:"confirmPassword",onChange:a=>p(a),value:c.confirmPassword,placeholder:"Подтверждение пароля",style:{color:"black",width:"100%"}})}),r.jsx(E,{className:o.password_change__submit_btn,disabled:n,style:n?{opacity:"0.2",cursor:"auto"}:void 0,type:"submit",isLoading:!1,children:"Ок"})]})})},B=()=>r.jsx(U,{});export{B as default};
