import{r as c,t as b,u as h,j as o,B as j,Q as y}from"./index-c322cabe.js";import{I as x}from"./input-578891f6.js";import{e as v}from"./errorCodes-6eb2ab82.js";const E="forgot_password_u2-J",S="forgot_password__form_eIFj",N="forgot_password__title_Elod",P="forgot_password__input_container_W23R",D="forgot_password__submit_btn_y7l9",r={forgot_password:E,forgot_password__form:S,forgot_password__title:N,forgot_password__input_container:P,forgot_password__submit_btn:D},R=a=>{const t={email:{message:""}};a.email.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/)||(t.email.message="Email не валиден");for(const n of Object.keys(t))if(t[n].message!=="")return t;return{}},k=()=>{const[a,t]=c.useState({}),[n,m]=c.useState(!0),[i,d]=c.useState({email:""}),[p]=b(),u=h(),g=async s=>{s.preventDefault();const _=i.email,e=await p({email:_,requestType:"PASSWORD_RESET"});if("error"in e){const w=e.error.data.error.message.split(" ")[0];t({email:{message:v[w]}})}else u("/"),y.success("Ссылка восстановления пароля отправлена на почту",{type:"success",position:"top-center"})},f=s=>{const _={...i,[s.target.name]:s.target.value},e=R(_);t(e),m(Object.keys(e).length!==0),d(l=>({...l,[s.target.name]:s.target.value}))};return o.jsx("div",{className:r.forgot_password,children:o.jsxs("form",{onSubmit:g,className:r.forgot_password__form,children:[o.jsx("h1",{className:r.forgot_password__title,children:"Смена пароля"}),o.jsx("div",{className:r.forgot_password__input_container,children:o.jsx(x,{error:a.email&&a.email.message,type:"email",id:"form_email",name:"email",onChange:s=>f(s),value:i.email,placeholder:"Email",style:{color:"black",width:"100%"}})}),o.jsx(j,{className:r.forgot_password__submit_btn,disabled:n,style:n?{opacity:"0.2",cursor:"auto"}:void 0,type:"submit",isLoading:!1,children:"Ок"})]})})},F=()=>o.jsx(k,{});export{F as default};
